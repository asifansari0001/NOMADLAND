<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://kit.fontawesome.com/7db032fd81.js" crossorigin="anonymous"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Averia+Serif+Libre:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Jacques+Francois&display=swap" rel="stylesheet">
  {% load static %}
   <link rel="icon" type="image/png" href="{% static 'mountains_black.png' %}">
    <link rel="stylesheet" href="{% static 'style.css' %}">

  <title>NOMADLAND</title>

  <style>
      body {
    font-family: "Jacques Francois", serif;
  font-weight: 400;
  font-style: normal;
    }

    /* overlay css */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            backdrop-filter: blur(1px);
        }

        .navbar {
            z-index: 10000;
            backdrop-filter: none;
            /* Remove blur effect from navbar */
        }


        .overlay-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: whitesmoke;
            border: groove 1px black;
            padding: 20px;
            border-radius: 10px;
        }

        .overlay-box {
            width: 60%;
            height: auto;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            /* Position buttons at the ends */
        }

        .user-btn,
        .agent-btn {
            width: 45%;
            /* Adjust button width */
            border: 2px solid transparent;
            background-color: transparent;
            color: black;
            margin: 5px 0;
            /* Adjust the margin as needed */
            padding: 10px;
            /* Adjust the padding as needed */
            text-align: center;

        }

        @media (max-width: 992px) {
            .overlay-box {
                width: 80%;
                /* Adjust width for smaller screens */
                flex-direction: column;
                /* Stack buttons vertically */
                align-items: center;
                /* Center buttons vertically */
            }

            .user-btn,
            .agent-btn {
                width: 100%;
                /* Full width for buttons on smaller screens */

            }
        }


        .agent-btn:hover {
            color: grey;
        }

        .user-btn:hover {
            color: grey;

        }

        @media (max-width: 992px) {
            .hide-on {
                display: none;
            }

            .overlay-box {
                width: 40%;
            }
        }

        @media (min-width:992px) {
            .hide-off {
                display: none;
            }

        }


        .navbar-nav .nav-link:not(.dropdown-toggle):hover {
            color: grey !important;
        }

        .overflow-hidden {
            overflow-y: hidden;
        }

        .dropdown-toggle::after {
            display: none;
        }

        /* overlay css */
<!--        .package-container {-->
<!--            max-width: 400px;-->
<!--            margin: 0 auto;-->
<!--            padding: 20px;-->
<!--            border: 1px solid #ccc;-->
<!--            border-radius: 10px;-->
<!--        }-->
        #pay-now-button {
            background-color: green;
            color: #FFFFFF; /* White */
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #pay-now-button:hover {
            background-color: darkgreen; /* Darker Red on hover */
        }


  </style>
</head>

<body>

  <!-- navbar section starts -->
    <header>
        <div>
            <nav class="navbar navbar-expand-lg" id="#mainNav" style="background-color: whitesmoke;">
                <div class="container-fluid">
                    <a class="navbar-brand  fw-bold" href="#">
                        <img src="{% static 'mountains_black.png' %}" alt="Logo" width="30" height="28"
                            class="d-inline-block align-text-top">
                        NOMAD<span>LAND</span>
                    </a>
                    <button class="navbar-toggler bg-white" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item">
                                <a class="nav-link text-black  nav-size " aria-current="page" href="{% url 'home' %}">HOME</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-black  nav-size" href="{% url 'booking' %}">TOURS</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-black  nav-size" href="{% url 'review' %}">REVIEWS</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-black  nav-size" href="{% url 'about' %}">ABOUT US</a>
                            </li>

{% if user_data %}
    <li class="nav-item dropdown ">
          <button class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fa-solid fa-circle-user"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-light dropdown-menu-end">
            {% with user=user_data.first %}
       {% with names=user.user_name.split %}

            <h6 class="text-center fw-bold mt-1">Hello {{ names.0 }}</h6>
        {% endwith %}
    {% endwith %}
            <hr>
            <li><a class="dropdown-item text-start" style="--bs-dropdown-link-active-bg:transperant; --bs-dropdown-link-active-color: black;" href="#">Account</a></li>
            <li><a class="dropdown-item text-start" style="--bs-dropdown-link-active-bg:transperant; --bs-dropdown-link-active-color: black;" href="#">Wishlist</a></li>
            <li><a class="dropdown-item text-start" style="--bs-dropdown-link-active-bg:transperant; --bs-dropdown-link-active-color: black;" href="#">History</a></li>
            <li><a class="dropdown-item text-start" style="--bs-dropdown-link-active-bg:transperant; --bs-dropdown-link-active-color: black;" href="#">Contact us</a></li>
             <li><a class="dropdown-item text-start" style="--bs-dropdown-link-active-bg:transperant; --bs-dropdown-link-active-color: black;" href="#">Saved Address</a></li>
            <hr>
             <li><a class="dropdown-item text-center" href="{% url 'logout' %}" style="--bs-dropdown-link-active-bg:transperant; --bs-dropdown-link-active-color: red;"> <button class="btn btn-danger" style="--bs-btn-hover-bg:#dc3545; --bs-btn-hover-border-color:#dc3545;">Logout</button> </a></li>
          </ul>
        </li>
{% else %}
    <li class="nav-item">
        <a class="nav-link dropdown-toggle ms-md-1 justify-content-sm-start ps-1 pt-1 pb-1"
            href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <button type="button" class="btn btn-outline-dark bg-light btn-sm sg-button text-black">SIGN IN</button>
        </a>
    </li>
{% endif %}
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </header>
    <!-- navbar section ends -->

    <!-- Overlay box markup -->
    <div class="overlay" id="overlay">
        <div class="overlay-box">
            <button class="btn user-btn fs-5 fw-bolder border-0" onclick="chooseOption('customer')">
                <i class="fas fa-user"></i><br> USER
            </button>
            <h2 class="hide-on">|</h2>
            <h1 class="hide-off">─</h1>
            <button class="btn  agent-btn fs-5 fw-bolder border-0" onclick="chooseOption('agent')">
                <i class="fas fa-user-tie"></i><br> AGENT
            </button><br>
        </div>
    </div>


    <!-- Overlay box markup ends -->
<br>
<br>
  <br>

<div class="container">
    <div class="center-div">
        <div class="payment-container">
            <div class="row">
                <div class="col">
                    <img src="{% static 'elevated-view-hat-camera-sunglasses-sea-shells-wrist-palm-leaf-yellow-surface.jpg' %}" alt="Payment Image"  class="img-fluid payment-image">
                </div>
                <div class="col me-1" style="border:1px solid #ccc; border-left:none;">
                    <br>

                    <div class="mb-3 text-center mt-2">
                        <h2>{{ destination }}</h2>
                    </div>

                    <div class="mb-3 text-center">
                        <h4>Travelers:{{travelers}}</h4>
                    </div>

                    <div class="mb-3 text-center">
                        <h4>Price : ₹{{ price }}</h4>
                    </div>

                    <div class="mb-3 text-center">
                        <h4>Agent : <span class="fs-5">{{agent}}</span> </h4>
                    </div>

                    <div class="mb-3 text-center">
                        <h4>{{ from_date }} - {{ to_date }}</h4>
                    </div>




                    <form id="payment-form" action="{% url 'payment_success'  %}" method="POST">
                        {% csrf_token %}
                        <!-- Include hidden input fields for Razorpay payment details -->
                        <!-- Include a hidden input field to capture the Razorpay payment ID -->
                        <input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id" />
                        <!-- Include a hidden input field to capture the Razorpay order ID -->
                        <input type="hidden" name="razorpay_order_id" id="razorpay_order_id" />
                        <!-- Include a hidden input field to capture the Razorpay signature -->
                        <input type="hidden" name="razorpay_signature" id="razorpay_signature" />
                        <input type="hidden" name="price" value="{{price}}" id="razorpay_price" />
                    </form>
                    <!-- Pay Now Button -->
                    <div class="col text-center">
    <!-- Pay Now Button -->
    <button id="pay-now-button" class="btn btn-danger mt-4">Proceed to Pay</button>
</div>

                </div>
            </div>
        </div>
    </div>
</div>



<br>
<br>



  <!-- Footer -->
  <br>
  <br>
  <footer class="text-center text-lg-start text-white bg-dark">
    <!-- Grid container -->
    <div class="container p-4 pb-0">
      <!-- Section: Links -->
      <section class="">
        <!--Grid row-->
        <div class="row">
          <!-- Grid column -->
          <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-2">
            <a class="navbar-brand text-white fs-5 fw-bold" href="{% url 'home'  %}">
              <img src="{% static 'mountains.png' %}" alt="Logo" width="30" height="28" class="d-inline-block align-text-top">
              NOMAD<span>LAND</span>
            </a>
            <p class="mt-3">
              Welcome to NomadLand, your one-stop destination for unforgettable journeys! We bring the world to your
              fingertips, offering curated travel experiences that will ignite your wanderlust. Explore the hidden gems
              of the globe with us and create memories that last a lifetime. Start your adventure with NomadLand today!
            </p>
          </div>
          <!-- Grid column -->

          <hr class="w-100 clearfix d-md-none" />

          <!-- Grid column -->
          <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
            <h6 class="text-uppercase mb-4 font-weight-bold">RESOURCES</h6>
            <p>
              <a class="text-white" style="text-decoration:none;">Login</a>
            </p>
            <p>
              <a class="text-white" style="text-decoration:none;">Contact us</a>
            </p>
            <p>
              <a class="text-white" style="text-decoration:none;">Certification</a>
            </p>
            <p>
              <a class="text-white" style="text-decoration:none;">Customer Reviews</a>
            </p>
          </div>
          <!-- Grid column -->

          <hr class="w-100 clearfix d-md-none" />

          <!-- Grid column -->
          <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
            <h6 class="text-uppercase mb-4 font-weight-bold">
              PARTNERS
            </h6>
            <p>
              <a class="text-warning" style="text-decoration: none;"> BRITISH AIRWAYS</a>
            </p>
            <p>
              <a class="text-warning" style="text-decoration: none;">TURKISH AIRLINES</a>
            </p>
            <p>
              <a class="text-warning" style="text-decoration: none;">CITILINK</a>
            </p>
            <p>
              <a class="text-warning" style="text-decoration: none;">EXPEDIA</a>
            </p>
            <p>
              <a class="text-warning" style="text-decoration: none;">AUSTRALIA</a>
            </p>
            <p>
              <a class="text-warning" style="text-decoration: none;">TRIP.COM</a>
            </p>
          </div>

          <!-- Grid column -->
          <hr class="w-100 clearfix d-md-none" />

          <!-- Grid column -->
          <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
            <h6 class="text-uppercase mb-4 font-weight-bold">CONTACT</h6>
            <p><i class="fas fa-home mr-3"></i> 2 Fifth Avenue,Alappuzha,Kerala</p>
            <p><i class="fas fa-envelope mr-3"></i> nomadland@gmail.com</p>
            <p><i class="fas fa-phone mr-3"></i>  923-456-789-1</p>
            <p><i class="fas fa-print mr-3"></i> 931-564-899-5</p>
          </div>
          <!-- Grid column -->
        </div>
        <!--Grid row-->
      </section>
      <!-- Section: Links -->

      <hr class="my-3">

      <!-- Section: Copyright -->
      <section class="p-3 pt-0">
        <div class="row d-flex align-items-center">
          <!-- Grid column -->
          <div class="col-md-7 col-lg-8 text-center text-md-start">
            <!-- Copyright -->
            <div class="p-3">
              © 2024 Copyright:
              <a class="text-white" href="#" style="text-decoration:none;">nomadland.com</a>
            </div>
            <!-- Copyright -->
          </div>
          <!-- Grid column -->

          <!-- Grid column -->
          <div class="col-md-5 col-lg-4 ml-lg-0 text-center text-md-end">
            <!-- Facebook -->
            <a class="btn btn-outline-light btn-floating m-1" class="text-white" role="button"><i
                class="fab fa-facebook-f"></i></a>

            <!-- Twitter -->
            <a class="btn btn-outline-light btn-floating m-1" class="text-white" role="button"><i
                class="fab fa-twitter"></i></a>

            <!-- Google -->
            <a class="btn btn-outline-light btn-floating m-1" class="text-white" role="button"><i
                class="fab fa-google"></i></a>

            <!-- Instagram -->
            <a class="btn btn-outline-light btn-floating m-1" class="text-white" role="button"><i
                class="fab fa-instagram"></i></a>
          </div>
          <!-- Grid column -->
        </div>
      </section>
      <!-- Section: Copyright -->
    </div>
    <!-- Grid container -->
  </footer>
  <!-- Footer -->


  <!-- footer endss -->

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const signInButton = document.querySelector('.dropdown-toggle button');
    const overlay = document.getElementById('overlay');

    signInButton.addEventListener('click', function (event) {
        event.stopPropagation(); // Prevent the event from bubbling up to the parent elements
        if (overlay.style.display === "block") {
            overlay.style.display = "none"; // Hide overlay if it's already visible
        } else {
            overlay.style.display = "block"; // Show overlay if it's hidden
        }
    });

    // Add event listener to overlay to close it when clicked anywhere on the screen
    overlay.addEventListener('click', function () {
        overlay.style.display = "none";
    });
});

function chooseOption(option) {
    if (option === 'customer') {
        window.location.href = "{% url 'login' %}"; // Redirect to the login URL
    } else if (option === 'agent') {
        window.location.href = "{% url 'agent_login' %}";
    }
}

</script>

   <script>
    // JavaScript to convert integer ratings to star icons
    document.addEventListener('DOMContentLoaded', function () {
        const starRatingElements = document.querySelectorAll('.star-ratings');
        starRatingElements.forEach(function (element) {
            const rating = parseInt(element.getAttribute('data-rating'));
            element.innerHTML = generateStarRatingHTML(rating);
        });
    });


</script>

    <!-- Custom JavaScript -->
    <script>
        // Function to handle payment process
        function handlePayment() {
            var options = {
                "key": "rzp_test_vlIdoXlKFqQ8XH",
                "amount": {{ razor_price }}, // Amount in currency subunits (paise)
                "currency": "INR",
                "name": "NOMADLAND",
                "description": "Travel And Explore The World!!",
                "image": "{% static 'mountains_black.png' %}",
                "prefill": {
                    "name": "{{username}}",
                    "email": "gaurav.kumar@example.com"
                },
                "theme": {
                    "color": "#F37254"
                },
                handler: function (response) {
                    // Fill the hidden fields with response details
                    document.getElementById('razorpay_payment_id').value = response.razorpay_payment_id;
                    document.getElementById('razorpay_order_id').value = response.razorpay_order_id;
                    document.getElementById('razorpay_signature').value = response.razorpay_signature;
                    // Submit the form
                    document.getElementById('payment-form').submit();
                }
            };
            var rzp1 = new Razorpay(options);
            rzp1.open();
        }

        // Attach click event listener to the Pay Now button
        document.getElementById('pay-now-button').addEventListener('click', function () {
            handlePayment();
        });
    </script>
   <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>


</body>